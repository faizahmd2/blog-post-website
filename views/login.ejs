<%- include('partials/_header') -%>
<link rel="stylesheet" href="css/login.css">
<body style="overflow-x: hidden;">
  <%- include('partials/_navigation') -%>
  <div class="background">
    <div class="background-image"></div>
    <div class="login full-screen-container large-screen-container">
      <div class="input-container">
        <h1 class="login-title">SIGN IN</h1>
        <form class="form" action="/signup" method="post" enctype="multipart/form-data">
          <div class="feild-container">
            <div class="input-group input-name">
              <label for="name">Full Name<span class="red">*</span></label>
              <input type="text" name="name" id="name" class="success error" placeholder="Full Name">
              <span err-message="name" class="msg">Invalid Name</span>
            </div>

            <div class="input-group">
              <label for="email">Email<span class="red">*</span></label>
              <input type="email" name="email" id="email" class="success error" placeholder="Email">
              <span err-message="email" class="msg">Invalid email</span>
            </div>

            <div class="input-group password-toggle">
              <label for="password">Password<span class="red">*</span></label>
              <input type="password" name="password" id="password" class="input-password error" placeholder="Password">
              <img class="icon-password" src="/img/icons/invisible.png" alt="" onclick="togglePasswordVisibility('password')">
              <span err-message="password" class="msg">Password must be minimum 6 characters</span>
            </div>

            <div class="input-group password-toggle password2-parent">
              <label for="password2">Verify Password<span class="red">*</span></label>
              <input type="password" name="password2" id="password2" class="input-password2 success"
                placeholder="Verify Password">
              <img class="icon-password2" src="/img/icons/invisible.png" alt="" onclick="togglePasswordVisibility('password2')">
              <span err-message="password2" class="msg">Password Not Matched</span>
            </div>

            <div class="additional-fields">
              <div class="input-group">
                <label for="phone">Phone</label>
                <input type="number" name="phone" id="phone" placeholder="Phone">
              </div>

              <div class="input-group">
                <label for="dob">Date Of Birth</label>
                <input type="date" name="age" id="age">
              </div>

              <div class="input-group">
                <label for="address">Address</label>
                <input type="text" name="address" id="address" placeholder="Address">
              </div>

              <div class="input-group">
                <label for="pincode">Pincode</label>
                <input type="number" name="pincode" id="pincode" placeholder="Pincode">
              </div>

              <div class="input-group">
                <label for="message">Message</label>
                <textarea name="message" id="message" cols="5" rows="4" placeholder="Message"></textarea>
              </div>
            </div>
            <div class="additional">
              <img class="additional-icon" src="/img/icons/slide-down.png" alt="" onclick="toggleAdditionalFields()">
              <span>Add Additional Details</span>
            </div>
          </div>
          <div class="footer">
            <div class="forget-pass">
              <span>Forgot Password?</span>
              <span class="toggle-span" onclick="toggleSigningMethod()">Signup?</span>
            </div>
            <div class="button-container">
              <button id="reset-btn" type="button" class="submit-button" onclick="resetFormData()">Reset</button>
              <button id="submit-btn" type="submit" class="submit-button disabled">Login</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
  <script>
    resetFormData();
    function toggleSigningMethod() {
      var formElem = $("form");
      if (isSignup()) {
        formElem.attr("action", "/login");
      } else {
        formElem.attr("action", "/signup");
      }
      resetFormData();
    }

    function isSignup() {
      console.log("form attrr",$("form").attr("action"))
      return $("form").attr("action") === "/signup";
    }

    function isAdditional() {
      if(!isSignup()) return null;

      if ($('.additional-fields').css('display') !== 'none') {
        return true;
      } else {
        return false;
      }
    }

    function toggleAdditionalFields() {
      let addt = isAdditional();
      if(addt === null) return;

      if(addt) {
        $('.additional-fields').hide();
        $('.additional-icon').attr('src', '/img/icons/slide-down.png');
      } else {
        $('.additional-fields').show();
        $('.additional-icon').attr('src', '/img/icons/slide-up.png');
      }
    }

    function togglePasswordVisibility(type) {
      let imgClass = "icon-" + type;
      let inputClass = "input-" + type;

      if($(inputClass).attr('type') === 'password') {
        $(inputClass).attr('type', 'password');
        $(imgClass).attr('src', '/img/icons/invisible.png');
      } else {
        $(inputClass).attr('type', 'text');
        $(imgClass).attr('src', '/img/icons/visible.png');
      }
    }

    function resetFormData() {
      console.log("isSignup===",isSignup());
      if (isSignup()) {
        $(".login-title").text("SIGN UP");
        $(".input-name").show();
        $(".additional").show();
        // $(".additional-fields").show();
        $(".password2-parent").show();
        $(".toggle-span").text("Signin?");
        $("#submit-btn").text("Signup");
      } else {
        $(".login-title").text("SIGN IN");
        $(".additional").hide();
        // $(".additional-fields").hide();
        $(".input-name").hide();
        $(".password2-parent").hide();
        $(".toggle-span").text("Signup?");
        $("#submit-btn").text("Login");
      }
      $(".additional-fields").hide();
      // $("span[err-message='name']").hide();
      $("span[err-message='email']").hide();
      $("span[err-message='password']").hide();
      $("span[err-message='password2']").hide();
    }

  </script>
</body>